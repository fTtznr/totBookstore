{"version":3,"file":"js/812.e491e25d.js","mappings":"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","sources":["webpack://totbookstore/./src/store/cart.js","webpack://totbookstore/./src/views/CartView.vue","webpack://totbookstore/./src/views/CartView.vue?73a2"],"sourcesContent":["import { defineStore } from \"pinia\"\r\n\r\nexport const cartStore = defineStore(\"cart\", {\r\n\r\n    state: () => {\r\n\r\n        return {\r\n\r\n            items: []\r\n\r\n        }\r\n\r\n    },\r\n\r\n    actions:{\r\n\r\n        addCart(book)\r\n        {\r\n\r\n            if(this.items){\r\n\r\n                let inCart = false\r\n\r\n                for(let item of this.items)\r\n                {\r\n                    if(item.id === book.id) \r\n                    {\r\n\r\n                        item.qtde += 1\r\n                        inCart = true\r\n                        break\r\n                    \r\n                    }\r\n\r\n                }\r\n\r\n                if(!inCart) \r\n                {\r\n                    book.qtde = 1\r\n                    this.items.push(book)\r\n                }\r\n\r\n            }else{\r\n\r\n                book.qtde = 1\r\n                this.items = [book]\r\n            }\r\n\r\n        },\r\n\r\n        searchCart(book){\r\n\r\n            let index = -1\r\n            \r\n            for(const [i, item] of this.items.entries())\r\n            {\r\n\r\n                if(item.id === book.id) \r\n                {\r\n\r\n                    index = i\r\n                    break\r\n                \r\n                }\r\n\r\n            }\r\n\r\n            return index\r\n\r\n        },\r\n\r\n        removeItem(book){\r\n\r\n            let index = this.searchCart(book)\r\n\r\n            if(index != -1) this.items.splice(index, 1)\r\n\r\n        },\r\n\r\n        increase(book){\r\n\r\n            let item = this.items[this.searchCart(book)] \r\n\r\n            if(item.qtde < item.quantity ) item.qtde++\r\n\r\n        },\r\n\r\n        decrease(book){\r\n\r\n            let item = this.items[this.searchCart(book)] \r\n \r\n            if(item.qtde > 1) item.qtde--\r\n              \r\n        },\r\n\r\n        async checkout(userID) {\r\n\r\n            try {\r\n\r\n                let books = []\r\n\r\n                for(let item of this.items) {\r\n\r\n                    books.push(\r\n                    {\r\n                        book: item.id,\r\n                        qtde: item.qtde\r\n    \r\n                    })\r\n\r\n                }\r\n                \r\n                const data = {\r\n\r\n                    items: books,\r\n                    user: userID,\r\n                    date: new Date().toJSON()\r\n    \r\n                }\r\n\r\n                console.log(data)\r\n    \r\n                const dataJSON = JSON.stringify(data)\r\n    \r\n                const req = await fetch(\"http://localhost:3000/orders\", {\r\n    \r\n                    method: \"POST\",\r\n                    headers: {\"Content-Type\": \"application/json\"},\r\n                    body: dataJSON\r\n                })\r\n    \r\n                const res = await req.json()\r\n                \r\n                this.items = []\r\n                \r\n            } catch (error) {}\r\n\r\n        }\r\n\r\n    },\r\n\r\n    getters: {\r\n\r\n        totalPrice(){\r\n\r\n            let total = 0\r\n\r\n            if(this.items)\r\n            {\r\n\r\n                for(let item of this.items) total += item.qtde * item.price\r\n\r\n            }\r\n\r\n            return total\r\n\r\n        }\r\n\r\n    }\r\n\r\n})","<template>\r\n\r\n  \r\n\r\n    <div class=\"cart\">\r\n\r\n        <div v-if=\"cart.items.length\">\r\n\r\n            <h1 class=\"capital center\">Carrinho de Compras</h1>\r\n\r\n            <div class=\"cart-product\">\r\n\r\n                <div class=\"cart-product-img\"></div>\r\n\r\n                <div class=\"cart-product-info\">\r\n\r\n                    <div class=\"cart-product-details\">Título</div>\r\n\r\n                    <div class=\"cart-product-details\">Preço unitário</div>\r\n\r\n                    <div class=\"cart-product-details\">Quantidade</div>\r\n\r\n                    <div class=\"cart-product-details icon\">Remover</div>\r\n\r\n                </div>\r\n                \r\n            </div>\r\n\r\n            <div class=\"cart-product\" v-for=\"book in cart.items\" :key=\"book.id\">\r\n                \r\n                <div class=\"cart-product-img\">\r\n                    <img :src=\"book.coverImg\"  @click=\"bookDetail(book)\">\r\n                </div>\r\n\r\n                <div class=\"cart-product-info\">\r\n\r\n                    <div class=\"cart-product-details\">\r\n                        {{book.title}}\r\n                    </div>\r\n\r\n                    <div class=\"cart-product-details\">\r\n                        {{book.price}}\r\n                    </div>\r\n\r\n                    <div class=\"cart-product-details\">\r\n                       <button @click=\"cart.decrease(book)\">-</button> {{book.qtde}} <button @click=\"cart.increase(book)\">+</button> \r\n                    </div>\r\n\r\n                    <div class=\"cart-product-details icon trash\">\r\n                        <i class=\"fa-solid fa-trash-can\" @click=\"cart.removeItem(book)\" />\r\n                    </div>\r\n\r\n                </div>\r\n\r\n            </div> \r\n\r\n            <div class=\"center\" v-if=\"cart.totalPrice !=0\"> \r\n                <strong>Total: R$ {{ cart.totalPrice.toFixed(2) }}</strong>\r\n                <br><br>\r\n                <button @click=\"checkout\">Finalizar Pedido</button>\r\n            </div>\r\n\r\n        </div>\r\n\r\n        <div v-else>\r\n\r\n            <h1 class=\"capital center\">Seu carrinho está vazio!</h1>\r\n\r\n        </div>\r\n                    \r\n    </div> \r\n\r\n</template>\r\n\r\n\r\n<script>\r\nimport { cartStore } from '@/store/cart'\r\nimport { bookStore } from '@/store/books'\r\nimport { sessionStore } from '@/store/session'\r\n\r\nexport default{\r\n\r\n    name: \"Cart\",\r\n\r\n    data(){\r\n\r\n        return{\r\n\r\n            cart: null\r\n        \r\n        }\r\n\r\n    },\r\n\r\n    created(){\r\n\r\n        this.cart = cartStore()\r\n        \r\n    },\r\n\r\n    methods:{\r\n\r\n        bookDetail(book){\r\n\r\n            bookStore().lastSeen = book\r\n            this.$router.push(\"/book\");\r\n\r\n        },\r\n\r\n        checkout(){\r\n\r\n            if(sessionStore().isLoggedIn) this.$router.push(\"/checkout\");\r\n\r\n            else {\r\n\r\n                sessionStore().checkout = true\r\n                this.$router.push(\"/profile\");\r\n\r\n            }\r\n            \r\n        }\r\n\r\n    }\r\n\r\n}\r\n\r\n</script>\r\n\r\n<style scoped>\r\nbutton {\r\n\r\n    background-color: #555555;\r\n    border: none;\r\n    color: white;\r\n    padding: 10px 20px;\r\n    margin: 0 auto;\r\n    text-align: center;\r\n    text-decoration: none;\r\n    display: inline-block;\r\n    \r\n}\r\n\r\nbutton:hover{\r\n    \r\n    transform: scale(1.15);\r\n    cursor: pointer;\r\n}\r\n\r\n</style>","import { render } from \"./CartView.vue?vue&type=template&id=4fef95ca&scoped=true\"\nimport script from \"./CartView.vue?vue&type=script&lang=js\"\nexport * from \"./CartView.vue?vue&type=script&lang=js\"\n\nimport \"./CartView.vue?vue&type=style&index=0&id=4fef95ca&scoped=true&lang=css\"\n\nimport exportComponent from \"/home/felipe/Desktop/totBookstore/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-4fef95ca\"]])\n\nexport default __exports__"],"names":["cartStore","defineStore","state","items","actions","addCart","book","this","inCart","item","id","qtde","push","searchCart","index","i","entries","removeItem","splice","increase","quantity","decrease","async","userID","books","data","user","date","Date","toJSON","console","log","dataJSON","JSON","stringify","req","fetch","method","headers","body","json","error","getters","totalPrice","total","price","class","_createElementVNode","_hoisted_19","_createElementBlock","_hoisted_1","$data","length","_hoisted_3","_Fragment","key","_hoisted_5","src","coverImg","onClick","$options","_hoisted_7","_hoisted_8","title","_hoisted_9","_hoisted_10","_hoisted_13","_hoisted_15","toFixed","_hoisted_16","name","cart","created","methods","bookDetail","bookStore","lastSeen","$router","checkout","sessionStore","isLoggedIn","__exports__","render"],"sourceRoot":""}