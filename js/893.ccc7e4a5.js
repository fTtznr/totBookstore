"use strict";(self["webpackChunktotbookstore"]=self["webpackChunktotbookstore"]||[]).push([[893],{882:(e,s,o)=>{o.d(s,{i:()=>a});var t=o(587);const a=(0,t.Q_)("cart",{state:()=>({items:[]}),actions:{addCart(e){if(this.items){let s=!1;for(let o of this.items)if(o.id===e.id){o.qtde+=1,s=!0;break}s||(e.qtde=1,this.items.push(e))}else e.qtde=1,this.items=[e]},searchCart(e){let s=-1;for(const[o,t]of this.items.entries())if(t.id===e.id){s=o;break}return s},removeItem(e){let s=this.searchCart(e);-1!=s&&this.items.splice(s,1)},increase(e){let s=this.items[this.searchCart(e)];s.qtde<s.quantity&&s.qtde++},decrease(e){let s=this.items[this.searchCart(e)];s.qtde>1&&s.qtde--},async checkout(e){try{let s=[];for(let e of this.items)s.push({book:e.id,qtde:e.qtde});const o={items:s,user:e,date:(new Date).toJSON()};console.log(o);const t=JSON.stringify(o),a=await fetch("http://localhost:3000/orders",{method:"POST",headers:{"Content-Type":"application/json"},body:t});await a.json();this.items=[]}catch(s){}}},getters:{totalPrice(){let e=0;if(this.items)for(let s of this.items)e+=s.qtde*s.price;return e}}})},855:(e,s,o)=>{o.d(s,{Z:()=>u});var t=o(812),a=o(220),i=o(54);function n(e,s,o,n,l,d){const p=(0,t.up)("Message");return(0,t.wg)(),(0,t.iD)("div",null,[(0,t.wy)((0,t._)("img",{class:"icon, addCart",src:i,onClick:s[0]||(s[0]=e=>d.addCart(o.book))},null,512),[[a.F8,!l.msg]]),(0,t.wy)((0,t.Wm)(p,{msg:l.msg},null,8,["msg"]),[[a.F8,l.msg]])])}var l=o(882),d=o(940);const p={name:"AddtoCart",props:{book:Object},components:{Message:d.Z},data(){return{msg:null}},methods:{addCart(e){(0,l.i)().addCart(e),this.msg="Item adicionado ao carrinho",setTimeout((()=>this.msg=""),3e3)}}};var r=o(998);const c=(0,r.Z)(p,[["render",n]]),u=c},940:(e,s,o)=>{o.d(s,{Z:()=>u});var t=o(812),a=o(893);const i=e=>((0,t.dD)("data-v-05ab3836"),e=e(),(0,t.Cn)(),e),n={class:"alert success"},l=i((()=>(0,t._)("span",{class:"closebtn"},"×",-1)));function d(e,s,o,i,d,p){return(0,t.wg)(),(0,t.iD)("div",n,[l,(0,t.Uk)((0,a.zw)(o.msg),1)])}const p={name:"Message",props:{msg:String},mounted(){let e,s=document.getElementsByClassName("closebtn");for(e=0;e<s.length;e++)s[e].onclick=function(){let e=this.parentElement;e.style.opacity="0",setTimeout((function(){e.style.display="none"}),600)}}};var r=o(998);const c=(0,r.Z)(p,[["render",d],["__scopeId","data-v-05ab3836"]]),u=c},187:(e,s,o)=>{o.r(s),o.d(s,{default:()=>re});var t=o(812),a=o(893),i=o(220);const n=o.p+"media/heheBoi.7df68895.mp3",l=e=>((0,t.dD)("data-v-9e31eebc"),e=e(),(0,t.Cn)(),e),d={class:"book-details"},p={class:"book-cover"},r=["src"],c={class:"book-details-info"},u={key:0},k={class:"label"},b={key:1},m=l((()=>(0,t._)("span",{class:"label"},"Título: ",-1))),y={key:2},h={key:3},w=l((()=>(0,t._)("span",{class:"label"},"Título: ",-1))),_=l((()=>(0,t._)("p",null,[(0,t._)("audio",{controls:""},[(0,t._)("source",{src:n,type:"audio/mp3"})])],-1))),g={key:4},C=l((()=>(0,t._)("span",{class:"label"},"Autor:",-1))),D={key:5},v=l((()=>(0,t._)("span",{class:"label"},"Autor:",-1))),f={key:6},q=l((()=>(0,t._)("span",{class:"label"},"Edição:",-1))),B={key:7},E=l((()=>(0,t._)("span",{class:"label"},"Edição:",-1))),U={key:8},S=l((()=>(0,t._)("span",{class:"label"},"Nº de páginas:",-1))),x={key:9},z=l((()=>(0,t._)("span",{class:"label"},"Nº de páginas:",-1))),F={key:10},V=l((()=>(0,t._)("span",{class:"label"},"Editora:",-1))),I={key:11},Z=l((()=>(0,t._)("span",{class:"label"},"Editora:",-1))),N={key:12},T=l((()=>(0,t._)("span",{class:"label"},"Data de Publicação:",-1))),A={key:13},O=l((()=>(0,t._)("span",{class:"label"},"Data de Publicação:",-1))),j={key:14},P=l((()=>(0,t._)("span",{class:"label"},"ISBN:",-1))),Q={key:15},M=l((()=>(0,t._)("span",{class:"label"},"ISBN:",-1))),W={key:16,class:"priceBox"},$={class:"label"},J={key:17},L={class:"label"},R={key:18},G=l((()=>(0,t._)("span",{class:"label"},null,-1))),H={key:19},K={key:20},X={key:0,class:"priceBox"},Y=l((()=>(0,t._)("span",{class:"label"},"Quantidade em Estoque: ",-1))),ee={key:1},se=l((()=>(0,t._)("span",{class:"label"},"Quantidade em Estoque:",-1)));function oe(e,s,o,n,l,oe){const te=(0,t.up)("AddtoCart"),ae=(0,t.up)("Confirmation");return(0,t.wg)(),(0,t.iD)("div",d,[(0,t._)("div",p,[(0,t._)("img",{src:l.book.coverImg},null,8,r)]),(0,t._)("div",c,[l.title?((0,t.wg)(),(0,t.iD)("p",b,[m,(0,t.wy)((0,t._)("input",{type:"text","onUpdate:modelValue":s[1]||(s[1]=e=>l.book.title=e)},null,512),[[i.nr,l.book.title]]),(0,t._)("span",{class:"edit",onClick:s[2]||(s[2]=()=>{l.title=!l.title,l.books.updateBook(l.book)})},"Salvar")])):((0,t.wg)(),(0,t.iD)("p",u,[(0,t._)("span",k,(0,a.zw)(l.book.title),1),(0,t.wy)((0,t._)("span",{class:"edit",onClick:s[0]||(s[0]=()=>l.title=!l.title)},"Editar",512),[[i.F8,l.session.user.admin]])])),l.description?((0,t.wg)(),(0,t.iD)("p",h,[w,(0,t.wy)((0,t._)("textarea",{"onUpdate:modelValue":s[4]||(s[4]=e=>l.book.description=e),rows:"10",cols:"100"},null,512),[[i.nr,l.book.description]]),(0,t._)("span",{class:"edit",onClick:s[5]||(s[5]=()=>{l.description=!l.description,l.books.updateBook(l.book)})},"Salvar")])):((0,t.wg)(),(0,t.iD)("p",y,[(0,t.Uk)((0,a.zw)(l.book.description)+" ",1),(0,t.wy)((0,t._)("span",{class:"edit",onClick:s[3]||(s[3]=()=>l.description=!l.description)},"Editar",512),[[i.F8,l.session.user.admin]])])),_,l.author?((0,t.wg)(),(0,t.iD)("p",D,[v,(0,t.wy)((0,t._)("input",{type:"text","onUpdate:modelValue":s[7]||(s[7]=e=>l.book.author=e)},null,512),[[i.nr,l.book.author]]),(0,t._)("span",{class:"edit",onClick:s[8]||(s[8]=()=>{l.author=!l.author,l.books.updateBook(l.book)})},"Salvar")])):((0,t.wg)(),(0,t.iD)("p",g,[C,(0,t.Uk)(" "+(0,a.zw)(l.book.author)+" ",1),(0,t.wy)((0,t._)("span",{class:"edit",onClick:s[6]||(s[6]=()=>l.author=!l.author)},"Editar",512),[[i.F8,l.session.user.admin]])])),l.edition?((0,t.wg)(),(0,t.iD)("p",B,[E,(0,t.wy)((0,t._)("input",{type:"text","onUpdate:modelValue":s[10]||(s[10]=e=>l.book.edition=e)},null,512),[[i.nr,l.book.edition]]),(0,t._)("span",{class:"edit",onClick:s[11]||(s[11]=()=>{l.edition=!l.edition,l.books.updateBook(l.book)})},"Salvar")])):((0,t.wg)(),(0,t.iD)("p",f,[q,(0,t.Uk)(" "+(0,a.zw)(l.book.edition)+" ",1),(0,t.wy)((0,t._)("span",{class:"edit",onClick:s[9]||(s[9]=()=>l.edition=!l.edition)},"Editar",512),[[i.F8,l.session.user.admin]])])),l.pages?((0,t.wg)(),(0,t.iD)("p",x,[z,(0,t.wy)((0,t._)("input",{type:"number",step:"1","onUpdate:modelValue":s[13]||(s[13]=e=>l.book.pages=e)},null,512),[[i.nr,l.book.pages]]),(0,t._)("span",{class:"edit",onClick:s[14]||(s[14]=()=>{l.pages=!l.pages,l.books.updateBook(l.book)})},"Salvar")])):((0,t.wg)(),(0,t.iD)("p",U,[S,(0,t.Uk)(" "+(0,a.zw)(l.book.pages)+" ",1),(0,t.wy)((0,t._)("span",{class:"edit",onClick:s[12]||(s[12]=()=>l.pages=!l.pages)},"Editar",512),[[i.F8,l.session.user.admin]])])),l.publisher?((0,t.wg)(),(0,t.iD)("p",I,[Z,(0,t.wy)((0,t._)("input",{type:"text","onUpdate:modelValue":s[16]||(s[16]=e=>l.book.publisher=e)},null,512),[[i.nr,l.book.publisher]]),(0,t._)("span",{class:"edit",onClick:s[17]||(s[17]=()=>{l.publisher=!l.publisher,l.books.updateBook(l.book)})},"Salvar")])):((0,t.wg)(),(0,t.iD)("p",F,[V,(0,t.Uk)(" "+(0,a.zw)(l.book.publisher)+" ",1),(0,t.wy)((0,t._)("span",{class:"edit",onClick:s[15]||(s[15]=()=>l.publisher=!l.publisher)},"Editar",512),[[i.F8,l.session.user.admin]])])),l.publishDate?((0,t.wg)(),(0,t.iD)("p",A,[O,(0,t.wy)((0,t._)("input",{type:"text","onUpdate:modelValue":s[19]||(s[19]=e=>l.book.publishDate=e)},null,512),[[i.nr,l.book.publishDate]]),(0,t._)("span",{class:"edit",onClick:s[20]||(s[20]=()=>{l.publishDate=!l.publishDate,l.books.updateBook(l.book)})},"Salvar")])):((0,t.wg)(),(0,t.iD)("p",N,[T,(0,t.Uk)(" "+(0,a.zw)(l.book.publishDate)+" ",1),(0,t.wy)((0,t._)("span",{class:"edit",onClick:s[18]||(s[18]=()=>l.publishDate=!l.publishDate)},"Editar",512),[[i.F8,l.session.user.admin]])])),l.isbn?((0,t.wg)(),(0,t.iD)("p",Q,[M,(0,t.wy)((0,t._)("input",{type:"text","onUpdate:modelValue":s[22]||(s[22]=e=>l.book.isbn=e)},null,512),[[i.nr,l.book.isbn]]),(0,t._)("span",{class:"edit",onClick:s[23]||(s[23]=()=>{l.isbn=!l.isbn,l.books.updateBook(l.book)})},"Salvar")])):((0,t.wg)(),(0,t.iD)("p",j,[P,(0,t.Uk)(" "+(0,a.zw)(l.book.isbn)+" ",1),(0,t.wy)((0,t._)("span",{class:"edit",onClick:s[21]||(s[21]=()=>l.isbn=!l.isbn)},"Editar",512),[[i.F8,l.session.user.admin]])])),!l.price&&l.book.price?((0,t.wg)(),(0,t.iD)("p",W,[(0,t._)("span",$,"R$ "+(0,a.zw)(l.book.price),1),(0,t.wy)((0,t._)("span",{class:"edit",onClick:s[24]||(s[24]=()=>l.price=!l.price)},"Editar",512),[[i.F8,l.session.user.admin]])])):((0,t.wg)(),(0,t.iD)("p",J,[(0,t._)("span",L,[(0,t.Uk)(" R$ "),(0,t.wy)((0,t._)("input",{type:"text","onUpdate:modelValue":s[25]||(s[25]=e=>l.book.price=e)},null,512),[[i.nr,l.book.price]])]),(0,t._)("span",{class:"edit",onClick:s[26]||(s[26]=()=>{l.price=!l.price,l.books.updateBook(l.book)})},"Salvar")])),l.book.price>0&&l.book.quantity>0?((0,t.wg)(),(0,t.iD)("p",R,[G,(0,t.Wm)(te,{book:l.book},null,8,["book"])])):((0,t.wg)(),(0,t.iD)("p",H,"Indisponível")),l.session.isLoggedIn&&l.session.user.admin?((0,t.wg)(),(0,t.iD)("div",K,[l.quantity?((0,t.wg)(),(0,t.iD)("p",ee,[se,(0,t.wy)((0,t._)("input",{type:"text","onUpdate:modelValue":s[28]||(s[28]=e=>l.book.quantity=e)},null,512),[[i.nr,l.book.quantity]]),(0,t._)("span",{class:"edit",onClick:s[29]||(s[29]=()=>{l.quantity=!l.quantity,l.books.updateBook(l.book)})},"Salvar")])):((0,t.wg)(),(0,t.iD)("p",X,[Y,(0,t.Uk)(" "+(0,a.zw)(l.book.quantity)+" ",1),(0,t.wy)((0,t._)("span",{class:"edit",onClick:s[27]||(s[27]=()=>l.quantity=!l.quantity)},"Editar",512),[[i.F8,l.session.user.admin]])])),(0,t._)("p",null,[(0,t.Wm)(ae,{data:l.data,onConfirm:s[30]||(s[30]=e=>oe.deleteBook(l.book.id))},null,8,["data"])])])):(0,t.kq)("",!0)])])}var te=o(855),ae=o(874),ie=o(899),ne=o(885);const le={name:"Book",components:{AddtoCart:te.Z,Confirmation:ae.Z},data(){return{book:null,books:null,session:null,data:null,title:!1,description:!1,isbn:!1,author:!1,edition:!1,pages:!1,publisher:!1,publishDate:!1,price:!1,quantity:!1}},created(){this.books=(0,ie.m)(),this.book=this.books.lastSeen,this.session=(0,ne.Q)(),this.data={title:"Excluir",msg:"Tem certeza que deseja excluir este Livro?",confirmOption:"Excluir"}},methods:{deleteBook(e){this.books.deleteBook(e),this.$router.push("/")}}};var de=o(998);const pe=(0,de.Z)(le,[["render",oe],["__scopeId","data-v-9e31eebc"]]),re=pe}}]);
//# sourceMappingURL=893.ccc7e4a5.js.map