"use strict";(self["webpackChunktotbookstore"]=self["webpackChunktotbookstore"]||[]).push([[641],{882:(t,e,s)=>{s.d(e,{i:()=>i});var o=s(587);const i=(0,o.Q_)("cart",{state:()=>({items:[]}),actions:{addCart(t){if(this.items){let e=!1;for(let s of this.items)if(s.id===t.id){s.qtde+=1,e=!0;break}e||(t.qtde=1,this.items.push(t))}else t.qtde=1,this.items=[t]},searchCart(t){let e=-1;for(const[s,o]of this.items.entries())if(o.id===t.id){e=s;break}return e},removeItem(t){let e=this.searchCart(t);-1!=e&&this.items.splice(e,1)},increase(t){let e=this.items[this.searchCart(t)];e.qtde<e.quantity&&e.qtde++},decrease(t){let e=this.items[this.searchCart(t)];e.qtde>1&&e.qtde--},async checkout(t){try{let e=[];for(let t of this.items)e.push({book:t.id,qtde:t.qtde});const s={items:e,user:t,date:(new Date).toJSON()};console.log(s);const o=JSON.stringify(s),i=await fetch("http://localhost:3000/orders",{method:"POST",headers:{"Content-Type":"application/json"},body:o});await i.json();this.items=[]}catch(e){}}},getters:{totalPrice(){let t=0;if(this.items)for(let e of this.items)t+=e.qtde*e.price;return t}}})},855:(t,e,s)=>{s.d(e,{Z:()=>m});var o=s(812),i=s(220),r=s(54);function n(t,e,s,n,a,c){const d=(0,o.up)("Message");return(0,o.wg)(),(0,o.iD)("div",null,[(0,o.wy)((0,o._)("img",{class:"icon, addCart",src:r,onClick:e[0]||(e[0]=t=>c.addCart(s.book))},null,512),[[i.F8,!a.msg]]),(0,o.wy)((0,o.Wm)(d,{msg:a.msg},null,8,["msg"]),[[i.F8,a.msg]])])}var a=s(882),c=s(940);const d={name:"AddtoCart",props:{book:Object},components:{Message:c.Z},data(){return{msg:null}},methods:{addCart(t){(0,a.i)().addCart(t),this.msg="Item adicionado ao carrinho",setTimeout((()=>this.msg=""),3e3)}}};var l=s(998);const u=(0,l.Z)(d,[["render",n]]),m=u},940:(t,e,s)=>{s.d(e,{Z:()=>m});var o=s(812),i=s(893);const r=t=>((0,o.dD)("data-v-05ab3836"),t=t(),(0,o.Cn)(),t),n={class:"alert success"},a=r((()=>(0,o._)("span",{class:"closebtn"},"×",-1)));function c(t,e,s,r,c,d){return(0,o.wg)(),(0,o.iD)("div",n,[a,(0,o.Uk)((0,i.zw)(s.msg),1)])}const d={name:"Message",props:{msg:String},mounted(){let t,e=document.getElementsByClassName("closebtn");for(t=0;t<e.length;t++)e[t].onclick=function(){let t=this.parentElement;t.style.opacity="0",setTimeout((function(){t.style.display="none"}),600)}}};var l=s(998);const u=(0,l.Z)(d,[["render",c],["__scopeId","data-v-05ab3836"]]),m=u},516:(t,e,s)=>{s.d(e,{Z:()=>v});var o=s(812),i=s(893),r=s(220);const n={class:"product-box"},a={class:"product-img"},c=["src","onClick"],d={class:"product-info"},l={key:0,class:"price"},u={key:1},m={style:{"text-align":"center"}};function h(t,e,s,h,p,g){const k=(0,o.up)("AddtoCart");return(0,o.wg)(),(0,o.iD)("div",n,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(p.bookStore.searchResult,(t=>((0,o.wg)(),(0,o.iD)("div",{class:"product",key:t.id},[(0,o._)("div",a,[(0,o._)("img",{src:t.coverImg,onClick:e=>g.bookDetail(t)},null,8,c)]),(0,o._)("div",d,[(0,o._)("h3",null,(0,i.zw)(t.title),1),t.price>0&&t.quantity>0?((0,o.wg)(),(0,o.iD)("span",l,[(0,o._)("h4",null," R$ "+(0,i.zw)(t.price),1)])):((0,o.wg)(),(0,o.iD)("span",u,"Indisponível")),(0,o._)("p",null,(0,i.zw)(t.description.slice(0,250))+"...",1),(0,o.wy)((0,o._)("p",m,[(0,o.Wm)(k,{book:t},null,8,["book"])],512),[[r.F8,t.price>0&&t.quantity>0]])])])))),128))])}var p=s(899),g=s(855);const k={name:"ProductBox",components:{AddtoCart:g.Z},data(){return{bookStore:null}},created(){this.bookStore=(0,p.m)()},methods:{bookDetail(t){this.bookStore.lastSeen=t,this.$router.push("/book")}}};var b=s(998);const f=(0,b.Z)(k,[["render",h]]),v=f},641:(t,e,s)=>{s.r(e),s.d(e,{default:()=>u});var o=s(812);function i(t,e,s,i,r,n){const a=(0,o.up)("ProductBox");return(0,o.wg)(),(0,o.j4)(a)}var r=s(516),n=s(603),a=s(899);const c={name:"Books",components:{ProductBox:r.Z},created(){(0,a.m)().searchResult=(0,a.m)().books,(0,n.d)().page="Livros"}};var d=s(998);const l=(0,d.Z)(c,[["render",i]]),u=l}}]);
//# sourceMappingURL=641.c283035e.js.map