"use strict";(self["webpackChunktotbookstore"]=self["webpackChunktotbookstore"]||[]).push([[848],{882:(t,e,s)=>{s.d(e,{i:()=>o});var i=s(587);const o=(0,i.Q_)("cart",{state:()=>({items:[]}),actions:{addCart(t){if(this.items){let e=!1;for(let s of this.items)if(s.id===t.id){s.qtde+=1,e=!0;break}e||(t.qtde=1,this.items.push(t))}else t.qtde=1,this.items=[t]},searchCart(t){let e=-1;for(const[s,i]of this.items.entries())if(i.id===t.id){e=s;break}return e},removeItem(t){let e=this.searchCart(t);-1!=e&&this.items.splice(e,1)},increase(t){let e=this.items[this.searchCart(t)];e.qtde<e.quantity&&e.qtde++},decrease(t){let e=this.items[this.searchCart(t)];e.qtde>1&&e.qtde--},async checkout(t){try{let e=[];for(let t of this.items)e.push({book:t.id,qtde:t.qtde});const s={items:e,user:t,date:(new Date).toJSON()};console.log(s);const i=JSON.stringify(s),o=await fetch("http://localhost:3000/orders",{method:"POST",headers:{"Content-Type":"application/json"},body:i});await o.json();this.items=[]}catch(e){}}},getters:{totalPrice(){let t=0;if(this.items)for(let e of this.items)t+=e.qtde*e.price;return t}}})},848:(t,e,s)=>{s.r(e),s.d(e,{default:()=>p});var i=s(812);const o={id:"about"},r=(0,i._)("h2",null,"Pedido Realizado!",-1),a=(0,i._)("p",null," Obrigado por comprar na Tot Bookstore. ",-1),c=[r,a];function d(t,e,s,r,a,d){return(0,i.wg)(),(0,i.iD)("div",o,c)}var h=s(882),n=s(885),l=s(899);const u={mounted(){(0,l.m)().changeQuantity((0,h.i)().items),(0,h.i)().checkout((0,n.Q)().user.id),(0,n.Q)().checkout=!1}};var m=s(998);const f=(0,m.Z)(u,[["render",d]]),p=f}}]);
//# sourceMappingURL=848.97ea7ad8.js.map