"use strict";(self["webpackChunktotbookstore"]=self["webpackChunktotbookstore"]||[]).push([[724],{940:(l,s,n)=>{n.d(s,{Z:()=>d});var e=n(812),a=n(893);const t=l=>((0,e.dD)("data-v-05ab3836"),l=l(),(0,e.Cn)(),l),u={class:"alert success"},i=t((()=>(0,e._)("span",{class:"closebtn"},"×",-1)));function o(l,s,n,t,o,r){return(0,e.wg)(),(0,e.iD)("div",u,[i,(0,e.Uk)((0,a.zw)(n.msg),1)])}const r={name:"Message",props:{msg:String},mounted(){let l,s=document.getElementsByClassName("closebtn");for(l=0;l<s.length;l++)s[l].onclick=function(){let l=this.parentElement;l.style.opacity="0",setTimeout((function(){l.style.display="none"}),600)}}};var m=n(998);const c=(0,m.Z)(r,[["render",o],["__scopeId","data-v-05ab3836"]]),d=c},724:(l,s,n)=>{n.r(s),n.d(s,{default:()=>J});var e=n(812),a=n(220),t=n(893),u=n(948);const i={class:"center"},o=(0,e._)("img",{class:"small",src:u},null,-1),r={class:"profile"},m={class:"signup"},c=(0,e._)("h2",null,"Sign Up",-1),d=(0,e._)("label",{for:"nameSignUp"},"Nome:",-1),p=(0,e._)("br",null,null,-1),g=(0,e._)("br",null,null,-1),h=(0,e._)("br",null,null,-1),_=(0,e._)("label",{for:"emailSignUp"},"Email:",-1),b=(0,e._)("br",null,null,-1),w=(0,e._)("br",null,null,-1),f=(0,e._)("br",null,null,-1),y=(0,e._)("label",{for:"passwordSignUp"},"Senha:",-1),v=(0,e._)("br",null,null,-1),U=(0,e._)("br",null,null,-1),S=(0,e._)("br",null,null,-1),k=(0,e._)("input",{type:"submit",value:"Criar"},null,-1),C=(0,e._)("br",null,null,-1),E=(0,e._)("br",null,null,-1),F={class:"login"},N=(0,e._)("h2",null,"Login",-1),P=(0,e._)("label",{for:"email"},"Email:",-1),q=(0,e._)("br",null,null,-1),A=(0,e._)("br",null,null,-1),D=(0,e._)("br",null,null,-1),L=(0,e._)("label",{for:"password"},"Senha:",-1),V=(0,e._)("br",null,null,-1),Z=(0,e._)("br",null,null,-1),z=(0,e._)("br",null,null,-1),j=(0,e._)("input",{type:"submit",value:"Entrar"},null,-1),I=(0,e._)("br",null,null,-1),M=(0,e._)("br",null,null,-1);function T(l,s,n,u,T,O){const Q=(0,e.up)("Message"),W=(0,e.up)("Dashboard");return(0,e.wg)(),(0,e.iD)("div",null,[(0,e._)("div",i,[(0,e.wy)((0,e.Wm)(Q,{msg:T.msg},null,8,["msg"]),[[a.F8,T.msg]]),o]),(0,e._)("div",r,[(0,e.wy)((0,e._)("div",null,[(0,e.wy)((0,e._)("div",m,[c,(0,e._)("form",{onSubmit:s[3]||(s[3]=(...l)=>O.signUp&&O.signUp(...l))},[d,p,(0,e.wy)((0,e._)("input",{type:"text",id:"nameSignUp",name:"nameSignUp",required:"","onUpdate:modelValue":s[0]||(s[0]=l=>T.suName=l)},null,512),[[a.nr,T.suName]]),g,h,_,b,(0,e.wy)((0,e._)("input",{type:"email",id:"emailSignUp",name:"emailSignUp",required:"","onUpdate:modelValue":s[1]||(s[1]=l=>T.suEmail=l)},null,512),[[a.nr,T.suEmail]]),w,f,y,v,(0,e.wy)((0,e._)("input",{type:"password",id:"passwordSignUp",name:"passwordSignUp",required:"","onUpdate:modelValue":s[2]||(s[2]=l=>T.suPassword=l)},null,512),[[a.nr,T.suPassword]]),U,S,k,C,E],32)],512),[[a.F8,T.createAccount]]),(0,e.wy)((0,e._)("div",F,[N,(0,e._)("form",{onSubmit:s[6]||(s[6]=(...l)=>O.login&&O.login(...l))},[P,q,(0,e.wy)((0,e._)("input",{type:"email",id:"email",name:"email",required:"","onUpdate:modelValue":s[4]||(s[4]=l=>T.email=l)},null,512),[[a.nr,T.email]]),A,D,L,V,(0,e.wy)((0,e._)("input",{type:"password",id:"password",name:"password",required:"","onUpdate:modelValue":s[5]||(s[5]=l=>T.password=l)},null,512),[[a.nr,T.password]]),Z,z,j,I,M],32)],512),[[a.F8,!T.createAccount]]),(0,e._)("div",{class:"suggestion",onClick:s[7]||(s[7]=(...l)=>O.changeForm&&O.changeForm(...l))},(0,t.zw)(T.suggestion),1)],512),[[a.F8,!T.session.isLoggedIn]]),(0,e.Wm)(W)])])}var O=n(940),Q=n(727),W=n(885);const $={name:"Profile",components:{Message:O.Z,Dashboard:Q.Z},data(){return{email:null,password:null,suName:null,suEmail:null,suPassword:null,isLogged:!1,createAccount:!1,suggestion:"Criar uma conta",msg:null,session:null}},created(){this.session=(0,W.Q)()},mounted(){this.session.checkout&&(this.msg="Por favor, autentique-se ou crie um nova conta para finalizar o seu pedido.")},methods:{async signUp(l){l.preventDefault();const s={name:this.suName,email:this.suEmail,password:this.suPassword,admin:!1},n=JSON.stringify(s),e=await fetch("http://localhost:3000/users",{method:"POST",headers:{"Content-Type":"application/json"},body:n});await e.json();this.suName=null,this.suEmail=null,this.suPassword=null,this.changeForm(),this.msg="Conta criada com sucesso! Autentique-se pela primeira vez."},async login(l){l.preventDefault();const s=await fetch("http://localhost:3000/users"),n=await s.json();let e=!1,a=null;for(let t of n)if(t.email===this.email&&t.password===this.password){e=!0,a=t;break}if(e){let l=(0,W.Q)();l.isLoggedIn=!0,l.user=a,this.session.checkout?this.$router.push("/checkout"):this.$router.push("/")}else this.msg="Usuário ou senha incorretos!"},changeForm(){this.createAccount=!this.createAccount,this.createAccount?this.suggestion="Log in":this.suggestion="Criar uma conta"}}};var x=n(998);const B=(0,x.Z)($,[["render",T]]),J=B}}]);
//# sourceMappingURL=724.ce665acc.js.map