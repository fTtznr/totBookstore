{"version":3,"file":"js/641.c283035e.js","mappings":"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","sources":["webpack://totbookstore/./src/store/cart.js","webpack://totbookstore/./src/components/AddtoCart.vue","webpack://totbookstore/./src/components/AddtoCart.vue?393d","webpack://totbookstore/./src/components/Message.vue","webpack://totbookstore/./src/components/Message.vue?ede3","webpack://totbookstore/./src/components/ProductBox.vue","webpack://totbookstore/./src/components/ProductBox.vue?ca7d","webpack://totbookstore/./src/views/BooksView.vue","webpack://totbookstore/./src/views/BooksView.vue?c132"],"sourcesContent":["import { defineStore } from \"pinia\"\r\n\r\nexport const cartStore = defineStore(\"cart\", {\r\n\r\n    state: () => {\r\n\r\n        return {\r\n\r\n            items: []\r\n\r\n        }\r\n\r\n    },\r\n\r\n    actions:{\r\n\r\n        addCart(book)\r\n        {\r\n\r\n            if(this.items){\r\n\r\n                let inCart = false\r\n\r\n                for(let item of this.items)\r\n                {\r\n                    if(item.id === book.id) \r\n                    {\r\n\r\n                        item.qtde += 1\r\n                        inCart = true\r\n                        break\r\n                    \r\n                    }\r\n\r\n                }\r\n\r\n                if(!inCart) \r\n                {\r\n                    book.qtde = 1\r\n                    this.items.push(book)\r\n                }\r\n\r\n            }else{\r\n\r\n                book.qtde = 1\r\n                this.items = [book]\r\n            }\r\n\r\n        },\r\n\r\n        searchCart(book){\r\n\r\n            let index = -1\r\n            \r\n            for(const [i, item] of this.items.entries())\r\n            {\r\n\r\n                if(item.id === book.id) \r\n                {\r\n\r\n                    index = i\r\n                    break\r\n                \r\n                }\r\n\r\n            }\r\n\r\n            return index\r\n\r\n        },\r\n\r\n        removeItem(book){\r\n\r\n            let index = this.searchCart(book)\r\n\r\n            if(index != -1) this.items.splice(index, 1)\r\n\r\n        },\r\n\r\n        increase(book){\r\n\r\n            let item = this.items[this.searchCart(book)] \r\n\r\n            if(item.qtde < item.quantity ) item.qtde++\r\n\r\n        },\r\n\r\n        decrease(book){\r\n\r\n            let item = this.items[this.searchCart(book)] \r\n \r\n            if(item.qtde > 1) item.qtde--\r\n              \r\n        },\r\n\r\n        async checkout(userID) {\r\n\r\n            try {\r\n\r\n                let books = []\r\n\r\n                for(let item of this.items) {\r\n\r\n                    books.push(\r\n                    {\r\n                        book: item.id,\r\n                        qtde: item.qtde\r\n    \r\n                    })\r\n\r\n                }\r\n                \r\n                const data = {\r\n\r\n                    items: books,\r\n                    user: userID,\r\n                    date: new Date().toJSON()\r\n    \r\n                }\r\n\r\n                console.log(data)\r\n    \r\n                const dataJSON = JSON.stringify(data)\r\n    \r\n                const req = await fetch(\"http://localhost:3000/orders\", {\r\n    \r\n                    method: \"POST\",\r\n                    headers: {\"Content-Type\": \"application/json\"},\r\n                    body: dataJSON\r\n                })\r\n    \r\n                const res = await req.json()\r\n                \r\n                this.items = []\r\n                \r\n            } catch (error) {}\r\n\r\n        }\r\n\r\n    },\r\n\r\n    getters: {\r\n\r\n        totalPrice(){\r\n\r\n            let total = 0\r\n\r\n            if(this.items)\r\n            {\r\n\r\n                for(let item of this.items) total += item.qtde * item.price\r\n\r\n            }\r\n\r\n            return total\r\n\r\n        }\r\n\r\n    }\r\n\r\n})","<template>\r\n\r\n    <div>\r\n        <img class=\"icon, addCart\" src=\"@/img/cart.png\" @click=\"addCart(book)\" v-show=\"!msg\"/> \r\n        <Message :msg=\"msg\" v-show=\"msg\" />\r\n    </div>\r\n\r\n</template>\r\n\r\n<script>\r\n\r\nimport { cartStore } from '@/store/cart'\r\nimport Message from '@/components/Message.vue'\r\n\r\nexport default {\r\n\r\n    name: \"AddtoCart\",\r\n\r\n    props: {book: Object},\r\n\r\n    components:{\r\n\r\n        Message\r\n    },\r\n    \r\n    data(){\r\n\r\n        return{\r\n            msg: null\r\n        }\r\n    },\r\n\r\n    methods:{\r\n\r\n        addCart(book)\r\n        {\r\n\r\n            cartStore().addCart(book)\r\n\r\n            this.msg = \"Item adicionado ao carrinho\"\r\n            \r\n            setTimeout(() => this.msg =\"\", 3000)\r\n\r\n        }\r\n\r\n    }\r\n    \r\n}\r\n\r\n</script>","import { render } from \"./AddtoCart.vue?vue&type=template&id=524adef4\"\nimport script from \"./AddtoCart.vue?vue&type=script&lang=js\"\nexport * from \"./AddtoCart.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/home/felipe/Desktop/totBookstore/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\r\n    <div class=\"alert success\">\r\n        <span class=\"closebtn\">&times;</span>{{msg}}\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n\r\nexport default {\r\n\r\n    name: \"Message\",\r\n\r\n    props:{\r\n\r\n        msg:  String\r\n\r\n    },\r\n\r\n    mounted(){\r\n\r\n        let close = document.getElementsByClassName(\"closebtn\");\r\n        let i;\r\n\r\n        for (i = 0; i < close.length; i++) {\r\n            close[i].onclick = function(){\r\n                let div = this.parentElement;\r\n                div.style.opacity = \"0\";\r\n                setTimeout(function(){ div.style.display = \"none\"; }, 600);\r\n            }\r\n        }\r\n    }\r\n\r\n}\r\n\r\n\r\n</script>\r\n\r\n\r\n<style scoped>\r\n    .alert {\r\n        padding: 20px;\r\n        background-color: #f44336;\r\n        color: white;\r\n        opacity: 1;\r\n        transition: opacity 0.6s;\r\n        margin-bottom: 15px;\r\n        margin-left: 15px;\r\n    }\r\n\r\n    .alert.success {background-color: #04AA6D;}\r\n    .alert.info {background-color: #2196F3;}\r\n    .alert.warning {background-color: #ff9800;}\r\n\r\n    .closebtn {\r\n        margin-left: 15px;\r\n        color: white;\r\n        font-weight: bold;\r\n        float: right;\r\n        font-size: 22px;\r\n        line-height: 20px;\r\n        cursor: pointer;\r\n        transition: 0.3s;\r\n    }\r\n\r\n    .closebtn:hover {\r\n        color: black;\r\n    }\r\n</style>","import { render } from \"./Message.vue?vue&type=template&id=05ab3836&scoped=true\"\nimport script from \"./Message.vue?vue&type=script&lang=js\"\nexport * from \"./Message.vue?vue&type=script&lang=js\"\n\nimport \"./Message.vue?vue&type=style&index=0&id=05ab3836&scoped=true&lang=css\"\n\nimport exportComponent from \"/home/felipe/Desktop/totBookstore/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-05ab3836\"]])\n\nexport default __exports__","<template>\r\n   \r\n    <div class=\"product-box\">\r\n         \r\n        <div class=\"product\" v-for=\"book in bookStore.searchResult\" :key=\"book.id\">\r\n \r\n             <div class=\"product-img\">\r\n                <img :src=\"book.coverImg\" @click=\"bookDetail(book)\">\r\n            </div>\r\n   \r\n             <div class=\"product-info\">\r\n \r\n                <h3>{{book.title}}</h3> \r\n\r\n                <span v-if=\"book.price>0 && book.quantity>0\" class=\"price\"><h4> R$ {{book.price}}</h4></span> \r\n                <span v-else>Indisponível</span>\r\n\r\n                <p>{{book.description.slice(0,250)}}...</p>\r\n\r\n                <p style=\"text-align:center\" v-show=\"book.price>0 && book.quantity>0\"><AddtoCart :book=\"book\"/></p>\r\n             \r\n            </div>\r\n\r\n        </div>\r\n     \r\n    </div>\r\n \r\n </template>\r\n \r\n \r\n <script>\r\n    \r\n    import { bookStore } from '@/store/books';\r\n    import AddtoCart from './AddtoCart.vue';\r\n \r\n    export default\r\n    {\r\n    \r\n        name: \"ProductBox\",\r\n\r\n        components: {AddtoCart},\r\n\r\n        data(){\r\n\r\n            return{\r\n\r\n                bookStore: null\r\n            \r\n            }\r\n        \r\n        },\r\n\r\n        created(){\r\n\r\n           this.bookStore = bookStore()\r\n\r\n        },\r\n\r\n        methods:\r\n        {\r\n\r\n            bookDetail(book){\r\n\r\n                this.bookStore.lastSeen = book\r\n                this.$router.push(\"/book\");\r\n\r\n            },\r\n\r\n        }\r\n    \r\n    }\r\n    \r\n </script>","import { render } from \"./ProductBox.vue?vue&type=template&id=077fc13a\"\nimport script from \"./ProductBox.vue?vue&type=script&lang=js\"\nexport * from \"./ProductBox.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/home/felipe/Desktop/totBookstore/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\r\n    <ProductBox />\r\n</template>\r\n\r\n<script>\r\n\r\nimport ProductBox from '@/components/ProductBox.vue'\r\nimport { menuStore } from '@/store/menu'\r\nimport { bookStore } from '@/store/books'\r\n\r\nexport default\r\n{\r\n    name: \"Books\",\r\n\r\n    components: \r\n    { \r\n      ProductBox\r\n    },\r\n\r\n    created(){\r\n\r\n      bookStore().searchResult = bookStore().books\r\n      menuStore().page = \"Livros\"\r\n\r\n    }\r\n\r\n}\r\n\r\n</script>","import { render } from \"./BooksView.vue?vue&type=template&id=d6a1bdf2\"\nimport script from \"./BooksView.vue?vue&type=script&lang=js\"\nexport * from \"./BooksView.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/home/felipe/Desktop/totBookstore/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["cartStore","defineStore","state","items","actions","addCart","book","this","inCart","item","id","qtde","push","searchCart","index","i","entries","removeItem","splice","increase","quantity","decrease","async","userID","books","data","user","date","Date","toJSON","console","log","dataJSON","JSON","stringify","req","fetch","method","headers","body","json","error","getters","totalPrice","total","price","_createElementBlock","_createElementVNode","class","src","_imports_0","onClick","$options","$props","$data","_createVNode","_component_Message","msg","name","props","Object","components","Message","methods","setTimeout","__exports__","render","_hoisted_1","_hoisted_2","String","mounted","close","document","getElementsByClassName","length","onclick","div","parentElement","style","opacity","display","_Fragment","searchResult","key","coverImg","_hoisted_4","title","_hoisted_5","description","slice","_hoisted_7","_component_AddtoCart","AddtoCart","bookStore","created","bookDetail","lastSeen","$router","_createBlock","_component_ProductBox","ProductBox","menuStore","page"],"sourceRoot":""}